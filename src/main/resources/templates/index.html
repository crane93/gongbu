<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="~{layout/layout}">  
  <th:block layout:fragment="content">
    <div class="content rounded">
      <div class="page-header">
        <h3>こんぶ</h3>
      </div>
      <div class="row">
        <div class="col-4">
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col-3">訪問数トップ10</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="word, rank : ${hitsTop10}" style="transform: rotate(0);">
                <th scope="row"><a th:href="@{'/word/detail/' + ${word.wordId}}" class="stretched-link"> [[${rank.count}]]</a></th>
                <td th:text="${word.wordName}"></td>
              </tr>
            </tbody>
          </table>
          </div>
          <div class="col-4">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col-3">いいねトップ10</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="word, rank : ${likeTop10}" style="transform: rotate(0);">
                  <th scope="row"><a th:href="@{'/word/detail/' + ${word.wordId}}" class="stretched-link"> [[${rank.count}]]</a></th>
                  <td th:text="${word.wordName}"></td>
                </tr>
              </tbody>
            </table>
          </div>   
          <div class="col-4">
            <p class="mt-3">ランダムことば(詳細はクリック!)</p>
            <div class="card mb-4 rounded-3 shadow-sm">
              <div class="card-body">
                <h2 class="card-title pricing-card-title text-center" id="cardWord">[[${cardWord.wordName}]]</h2>
                    <a th:href="@{'/word/detail/' + ${cardWord.wordId}}" class="stretched-link cardWordLink"></a>
                  </div>
                </ul>
              </div>
            </div>
          </div> 
        </div>
      </div>
    </div>
    <script type="text/javascript" th:inline="javascript">
      // setInterval(randomWordCall, 5000);

      // function randomWordCall() {
      //   $.ajax({
      //     url: '/word/random',
      //     type: 'get',
      //   }).done(function (data) {
      //     const randomWord = JSON.parse(data);
      //     var context = window.location.pathname.substring(0, window.location.pathname.indexOf("/",2)); 
      //     var url =window.location.protocol+"//"+ window.location.host +context+"/word/detail/" + randomWord.wordId;

      //     $("#cardWord").html(randomWord.wordName);
      //     $(".cardWordLink").attr("href", url);
      //   });
      // }
    </script>
  </th:block>  
</html>